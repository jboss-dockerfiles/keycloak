{"version":3,"sources":["webpack:///webpack/bootstrap 4dde9399a9a7193f78d7","webpack:///./src/client.js","webpack:///./~/websocket/lib/browser.js","webpack:///./~/websocket/lib/version.js","webpack:///./~/websocket/package.json"],"names":["killbugtodaySettings","app_id","Error","WS","require","w3cwebsocket","client","onerror","console","log","onopen","onclose","onmessage","e","f","wrap","res","eval","cmd","err","error"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;;;AAEA,KAAG,QAAOA,oBAAP,yCAAOA,oBAAP,OAAgC,QAAhC,IAA4C,OAAOA,qBAAqBC,MAA5B,KAAuC,QAAtF,EAA+F;AAC7F,SAAM,IAAIC,KAAJ,CAAU,sGAAV,CAAN;AACD;;AAED;AACA;;AAEA,KAAIC,KAAK,mBAAAC,CAAQ,CAAR,EAAqBC,YAA9B;;AAEA;AACA;AACA,KAAIC,SAAS,IAAIH,EAAJ,CAAO,UAAU,gBAAV,GAAiC,UAAjC,GAA8CH,qBAAqBC,MAA1E,CAAb,C,CAAgG;;AAEhG;;AAEAK,QAAOC,OAAP,GAAiB,YAAW;AAC1BC,WAAQC,GAAR,CAAY,kBAAZ;AACD,EAFD;;AAIAH,QAAOI,MAAP,GAAgB,YAAW;AACzB;;AAEAF,WAAQC,GAAR,CAAY,4BAAZ;AACD,EAJD;;AAMAH,QAAOK,OAAP,GAAiB,YAAW;AAC1BH,WAAQC,GAAR,CAAY,yBAAZ;AACD,EAFD;;AAIAH,QAAOM,SAAP,GAAmB,UAASC,CAAT,EAAY;AAC7B;;AAEAC,OAAIC,KAAKD,CAAL,CAAJ;AACA,OAAI;AACF,SAAME,MAAMC,KAAKC,GAAL,CAAZ;AACA;AACA;AACAJ,OAAE,IAAF,EAAQE,GAAR;AACD,IALD,CAKE,OAAOG,GAAP,EAAY;AACZX,aAAQY,KAAR,CAAc,WAAd,EAA2BD,GAA3B;AACAL,OAAEK,GAAF;AACD;AACF,EAbD;;AAeA;AACA;AACA;;AAEA;;AAEA;AACA;;;;;;;;;AASA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9DA,4BAA2B,aAAa,EAAE;AAC1C;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnCA;;;;;;;ACAA,mBAAkB,WAAW,sHAAsH,wLAAwL,+GAA+G,aAAa,iDAAiD,8CAA8C,eAAe,sHAAsH,wPAAwP,qFAAqF,oCAAoC,6DAA6D,WAAW,gBAAgB,kBAAkB,kFAAkF,kBAAkB,iFAAiF,oIAAoI,iLAAiL,gBAAgB,cAAc,SAAS,4HAA4H,YAAY,iBAAiB,0RAA0R,iDAAiD,8CAA8C,uDAAuD,2EAA2E,YAAY,qGAAqG,oB","file":"client.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4dde9399a9a7193f78d7","'use strict';\n\nif(typeof killbugtodaySettings !== 'object' || typeof killbugtodaySettings.app_id !== 'string'){\n  throw new Error('`killbugtodaySettings` must be a global object and contain an `app_id` property with a string value.');\n}\n\n//const {wrap, Serializer} = require('../../relay/src/sockets/wrap');\n//const io = require('socket.io-client');\n\nvar WS = require('websocket').w3cwebsocket;\n\n// Note: No auth on tag (cannot authenticate users from our clients)\n// 2nd note: route not definitive\nvar client = new WS('ws://' + process.env.ENDPOINT + '/pubsub/' + killbugtodaySettings.app_id); // from Nchan we can extract this route param with $1\n\n//const socket = io(process.env.ENDPOINT+'/client', {});\n\nclient.onerror = function() {\n  console.log('Connection Error');\n};\n\nclient.onopen = function() {\n  //To send msg => client.send(msg)\n\n  console.log('WebSocket Client Connected');\n};\n\nclient.onclose = function() {\n  console.log('WebSocket Client Closed');\n};\n\nclient.onmessage = function(e) {\n  // @todo Check type message (execute, etc.)\n\n  f = wrap(f);\n  try {\n    const res = eval(cmd);\n    // console.log(cmd, \" => (\",typeof res, \") \", Serializer.toPrimitive(res));\n    // console.debug(Serializer.toPrimitive(res));\n    f(null, res);\n  } catch (err) {\n    console.error('GOT ERROR', err);\n    f(err);\n  }\n};\n\n// Plugins\n//const Errors = require('./plugins/Errors/Errors')(socket);\n//require('./plugins/DOM')(socket);\n\n// @todo ensure APP_ID & USER_IDENTITY (string) & CUSTOM_DATA (optional) are defined\n\n// @todo send at authentication level\n/*\nsocket.on('handshake', function(f) {\n  f(null, {\n    app_id: killbugtodaySettings.app_id,\n    context: killbugtodaySettings.context\n  });\n});\n*/\n\n/*\nsocket.on('forwarding', () => {\n  // console.log('forwarding');\n  // DOM.stop();\n  // DOM.start();\n});\n\nsocket.on('forwarding:stopped', () => {\n  // DOM.stop();\n});\n\nsocket.on('execute', function(cmd, f) {\n  f = wrap(f);\n\n  try {\n    const res = eval(cmd);\n    // console.log(cmd, \" => (\",typeof res, \") \", Serializer.toPrimitive(res));\n    // console.debug(Serializer.toPrimitive(res));\n    f(null, res);\n  } catch (err) {\n    console.error('GOT ERROR', err);\n    f(err);\n  }\n});\n*/\n\n\n\n// WEBPACK FOOTER //\n// ./src/client.js","var _global = (function() { return this; })();\nvar NativeWebSocket = _global.WebSocket || _global.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\n\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/websocket/lib/browser.js\n// module id = 1\n// module chunks = 0","module.exports = require('../package.json').version;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/websocket/lib/version.js\n// module id = 2\n// module chunks = 0","module.exports = {\"_args\":[[{\"raw\":\"websocket\",\"scope\":null,\"escapedName\":\"websocket\",\"name\":\"websocket\",\"rawSpec\":\"\",\"spec\":\"latest\",\"type\":\"tag\"},\"/home/brice/Development/killbug/tag\"]],\"_from\":\"websocket@latest\",\"_id\":\"websocket@1.0.24\",\"_inCache\":true,\"_location\":\"/websocket\",\"_nodeVersion\":\"7.3.0\",\"_npmOperationalInternal\":{\"host\":\"packages-12-west.internal.npmjs.com\",\"tmp\":\"tmp/websocket-1.0.24.tgz_1482977757939_0.1858439394272864\"},\"_npmUser\":{\"name\":\"theturtle32\",\"email\":\"brian@worlize.com\"},\"_npmVersion\":\"3.10.10\",\"_phantomChildren\":{},\"_requested\":{\"raw\":\"websocket\",\"scope\":null,\"escapedName\":\"websocket\",\"name\":\"websocket\",\"rawSpec\":\"\",\"spec\":\"latest\",\"type\":\"tag\"},\"_requiredBy\":[\"#USER\"],\"_resolved\":\"https://registry.npmjs.org/websocket/-/websocket-1.0.24.tgz\",\"_shasum\":\"74903e75f2545b6b2e1de1425bc1c905917a1890\",\"_shrinkwrap\":null,\"_spec\":\"websocket\",\"_where\":\"/home/brice/Development/killbug/tag\",\"author\":{\"name\":\"Brian McKelvey\",\"email\":\"brian@worlize.com\",\"url\":\"https://www.worlize.com/\"},\"browser\":\"lib/browser.js\",\"bugs\":{\"url\":\"https://github.com/theturtle32/WebSocket-Node/issues\"},\"config\":{\"verbose\":false},\"contributors\":[{\"name\":\"IÃ±aki Baz Castillo\",\"email\":\"ibc@aliax.net\",\"url\":\"http://dev.sipdoc.net\"}],\"dependencies\":{\"debug\":\"^2.2.0\",\"nan\":\"^2.3.3\",\"typedarray-to-buffer\":\"^3.1.2\",\"yaeti\":\"^0.0.6\"},\"description\":\"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.\",\"devDependencies\":{\"buffer-equal\":\"^1.0.0\",\"faucet\":\"^0.0.1\",\"gulp\":\"git+https://github.com/gulpjs/gulp.git#4.0\",\"gulp-jshint\":\"^2.0.4\",\"jshint\":\"^2.0.0\",\"jshint-stylish\":\"^2.2.1\",\"tape\":\"^4.0.1\"},\"directories\":{\"lib\":\"./lib\"},\"dist\":{\"shasum\":\"74903e75f2545b6b2e1de1425bc1c905917a1890\",\"tarball\":\"https://registry.npmjs.org/websocket/-/websocket-1.0.24.tgz\"},\"engines\":{\"node\":\">=0.8.0\"},\"gitHead\":\"0e15f9445953927c39ce84a232cb7dd6e3adf12e\",\"homepage\":\"https://github.com/theturtle32/WebSocket-Node\",\"keywords\":[\"websocket\",\"websockets\",\"socket\",\"networking\",\"comet\",\"push\",\"RFC-6455\",\"realtime\",\"server\",\"client\"],\"license\":\"Apache-2.0\",\"main\":\"index\",\"maintainers\":[{\"name\":\"theturtle32\",\"email\":\"brian@worlize.com\"}],\"name\":\"websocket\",\"optionalDependencies\":{},\"readme\":\"ERROR: No README data found!\",\"repository\":{\"type\":\"git\",\"url\":\"git+https://github.com/theturtle32/WebSocket-Node.git\"},\"scripts\":{\"gulp\":\"gulp\",\"install\":\"(node-gyp rebuild 2> builderror.log) || (exit 0)\",\"test\":\"faucet test/unit\"},\"version\":\"1.0.24\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/websocket/package.json\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}